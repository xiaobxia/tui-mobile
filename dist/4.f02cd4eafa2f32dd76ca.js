webpackJsonp([4,28,31],{Ko9b:function(t,e){},"S5/N":function(t,e){},VV1s:function(t,e){},bPRs:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},a={name:"IncomeDetails",components:{},data:function(){return{show:!1,sumInfo:{},incomeBVOList:[]}},computed:{},created:function(){},deactivated:function(){this.show=!1},methods:{open:function(t,e){this.sumInfo=e;var s=[];t.forEach(function(t){t.bvos&&t.bvos.length&&t.bvos.forEach(function(e){s.push(i({},e,{sumSubCode:t.subCode,sumSubName:t.subName,sumSubAbstract:t.subAbstract,sumSubMny:t.subMny}))})}),this.incomeBVOList=s,this.show=!0},close:function(){this.show=!1,this.$emit("close")},toPath:function(t){this.$router.push(t)}}},o=s("W5g0");var n=function(t){s("Ko9b")},r=Object(o.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-popup",{style:{height:"100%",width:"100%"},attrs:{position:"left"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("van-nav-bar",{attrs:{title:"收入明细","left-arrow":""},on:{"click-left":t.close}}),t._v(" "),s("div",{staticClass:"common-view-wrap",staticStyle:{"overflow-x":"scroll"}},[s("van-row",{staticClass:"common-info-block",staticStyle:{"background-color":"#F7F8F9"},attrs:{type:"flex",justify:"space-between"}},[s("div",{staticClass:"ellipsis-text"},[t._v("本期总收入")]),t._v(" "),s("div",[t._v("¥ "+t._s(t.$formatMoney(t.sumInfo.incomeTotalPeriod)))])]),t._v(" "),s("div",{staticClass:"common-block"},[s("table",{attrs:{cellspacing:"0",cellpadding:"0",border:"1"}},[s("thead",[s("tr",[s("th",{attrs:{width:"25%"}},[t._v("总账科目")]),t._v(" "),s("th",{attrs:{width:"25%"}},[t._v("明细科目")]),t._v(" "),s("th",{attrs:{width:"25%"}},[t._v("摘要说明")]),t._v(" "),s("th",{attrs:{width:"25%"}},[t._v("金额")])])]),t._v(" "),t._l(t.incomeBVOList,function(e,i){return s("tr",{key:i},[s("td",{staticStyle:{"text-align":"left","font-size":".32rem"}},[t._v(t._s(e.subCode)+" - "+t._s(e.subName))]),t._v(" "),s("td",{staticStyle:{"text-align":"left","font-size":".32rem"}},[t._v(t._s(e.subCode)+" - "+t._s(e.subName))]),t._v(" "),s("td",{staticStyle:{"text-align":"left","font-size":".32rem"}},[t._v(t._s(e.subAbstract))]),t._v(" "),s("td",{staticStyle:{"text-align":"right","font-size":".32rem"}},[t._v(t._s(t.$formatMoney(e.subMny)))])])})],2)])],1)],1)},[],!1,n,"data-v-75cf990a",null);e.default=r.exports},oEbH:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("zH3I"),a=s.n(i),o=s("wOqC"),n=s("Z5i5"),r=s("HRnp"),c=s("Rz25"),l=s("bPRs"),h=s("psh8"),d=s("bSIt"),u=s("A29K"),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t};var f={name:"ExpenditureDetails",components:{YearMonthRangeSelect:o.a,BookSelect:n.a,ViewLoading:r.a,IncomeDetails:l.default,ExpendDetails:h.default,BetterPick:c.a},data:function(){return{searchForm:(e={certStartYearMonth:"",certEndYearMonth:"",isDelClose:0,isDelUnAudit:0,isUsedSub:0},t&&(e=Object.assign(e,t)),e),oldSearchFrom:{},currentBook:{},detailData:{},isFirstTimes:!0,incomeBVOList:[],spendingBVOList:[],show:!1,filterLoading:!1,viewLoading:!1};var t,e},computed:v({dateRangeShowName:function(){return a()(this.searchForm.certStartYearMonth).format("YYYY年M月")+"-"+a()(this.searchForm.certEndYearMonth).format("YYYY年M月")}},Object(d.b)(["userBookList"])),created:function(){if(0===this.userBookList.length)return u.b.fail("用户无关联账本！"),this.$router.replace("/index/home"),!1;this.currentBook=this.userBookList[0],this.searchForm.certStartYearMonth=a()(this.currentBook.nowPeriod).startOf("month").format("YYYY-MM"),this.searchForm.certEndYearMonth=a()(this.currentBook.nowPeriod).endOf("month").format("YYYY-MM"),this.queryList()},activated:function(){this.isFirstTimes||this.queryList(),this.isFirstTimes=!1},methods:{bookChange:function(t){this.currentBook=t,console.log(this.currentBook,"this.currentBook"),this.searchForm.certStartYearMonth=a()(this.currentBook.nowPeriod).startOf("month").format("YYYY-MM"),this.searchForm.certEndYearMonth=a()(this.currentBook.nowPeriod).endOf("month").format("YYYY-MM"),this.queryList()},toIncomeDetail:function(){if(0===this.incomeBVOList.length)return u.b.fail("无收入明细！"),!1;this.$refs.incomeDetails.open(this.incomeBVOList,this.detailData)},toExpendDetail:function(){if(0===this.spendingBVOList.length)return u.b.fail("无支出明细！"),!1;this.$refs.expendDetails.open(this.spendingBVOList,this.detailData)},toPath:function(t){this.$router.push(t)},openFilter:function(){this.oldSearchFrom=this.$deepClone(this.searchForm),this.show=!0,this.filterLoading=!1},setOldSearchFrom:function(){this.searchForm.isDelUnAudit=0,this.searchForm.isDelClose=0,this.searchForm.isUsedSub=0},filterOK:function(){var t=this;this.filterLoading=!0,this.show=!1,this.queryList().then(function(){t.filterLoading=!1}).catch(function(e){console.log(e),t.filterLoading=!1})},openDateRangeSelect:function(){this.$refs.yearMonthRangeSelect.open([new Date(a()(this.searchForm.startDate).format("YYYY/MM/DD")),new Date(a()(this.searchForm.endDate).format("YYYY/MM/DD"))])},dateRangeSelectOk:function(t){this.searchForm.certStartYearMonth=t[0],this.searchForm.certEndYearMonth=t[1],this.queryList()},backHandler:function(){this.$router.history.go(-1)},queryList:function(){var t=this;return this.viewLoading=!0,this.$http.postFormData("villageapp/financialReport/villageMnyFundsDetailData",v({},this.searchForm,{bookId:this.currentBook.phid,certStartYearMonth:a()(this.searchForm.certStartYearMonth).format("YYYY-MM"),certEndYearMonth:a()(this.searchForm.certEndYearMonth).format("YYYY-MM")})).then(function(e){t.viewLoading=!1,t.incomeBVOList=e.data.incomeBVOList||[],t.spendingBVOList=e.data.spendingBVOList||[],t.detailData=e.data||{}}).catch(function(e){console.log(e),t.viewLoading=!1})}}},m=s("W5g0");var _=function(t){s("VV1s")},b=Object(m.a)(f,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-cert-list"},[s("van-nav-bar",{attrs:{title:"货币资金收支明细表","left-arrow":""},on:{"click-left":t.backHandler}}),t._v(" "),s("div",{staticClass:"s-w"},[s("div",{staticClass:"fake-input one"},[s("book-select",{attrs:{"current-book":t.currentBook},on:{change:t.bookChange}})],1),t._v(" "),s("div",{staticClass:"fake-input two",on:{click:t.openDateRangeSelect}},[s("div",{staticClass:"ellipsis-text"},[t._v(t._s(t.dateRangeShowName))])]),t._v(" "),s("div",{staticClass:"fake-input three",on:{click:t.openFilter}},[t._m(0)])]),t._v(" "),s("div",{staticClass:"view-loading-wrap"},[t.viewLoading?s("view-loading"):t._e(),t._v(" "),s("div",{staticClass:"c-l-w"},[s("div",{staticClass:"b-b"},[s("div",{staticClass:"no-border"},[s("p",[t._v("上期结存货币资金合计")]),t._v(" "),s("p",[t._v("¥ "+t._s(t.$formatMoney(t.detailData.beginPeriodTotal)))])]),t._v(" "),s("div",{staticClass:"b-b-s"},[s("p",{staticStyle:{"text-indent":"2em"}},[t._v("其中：现金")]),t._v(" "),s("p",[t._v("¥ "+t._s(t.$formatMoney(t.detailData.beginPeriodCash)))])]),t._v(" "),s("div",{staticClass:"b-b-s"},[s("p",{staticStyle:{"text-indent":"4em"}},[t._v("银行存款")]),t._v(" "),s("p",[t._v("¥ "+t._s(t.$formatMoney(t.detailData.beginPeriodBankDeposit)))])])]),t._v(" "),s("van-cell",{attrs:{value:"¥ "+t.$formatMoney(t.detailData.incomeTotalPeriod),title:"本期收入合计","is-link":""},on:{click:t.toIncomeDetail}}),t._v(" "),s("van-cell",{attrs:{value:"¥ "+t.$formatMoney(t.detailData.spendingTotalPeriod),title:"本期支出合计","is-link":""},on:{click:t.toExpendDetail}}),t._v(" "),s("div",{staticClass:"b-b"},[s("div",{staticClass:"no-border"},[s("p",[t._v("本期结存货币资金合计")]),t._v(" "),s("p",[t._v("¥ "+t._s(t.$formatMoney(t.detailData.endPeriodTotal)))])]),t._v(" "),s("div",{staticClass:"b-b-s"},[s("p",{staticStyle:{"text-indent":"2em"}},[t._v("其中：现金")]),t._v(" "),s("p",[t._v("¥ "+t._s(t.$formatMoney(t.detailData.endPeriodCash)))])]),t._v(" "),s("div",{staticClass:"b-b-s"},[s("p",{staticStyle:{"text-indent":"4em"}},[t._v("银行存款")]),t._v(" "),s("p",[t._v("¥ "+t._s(t.$formatMoney(t.detailData.endPeriodBankDeposit)))])])])],1)],1),t._v(" "),s("van-popup",{style:{height:"100%",width:"85%"},attrs:{position:"right"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"f-w"},[s("div",[s("better-pick",{attrs:{"form-data":t.searchForm,columns:t.$SHI_FOU_SELECT,"value-key":"isDelUnAudit",title:"剔除未审核凭证"}},[s("van-cell",{attrs:{value:t.$SHI_FOU_LIST[t.searchForm.isDelUnAudit].label,title:"剔除未审核凭证","is-link":"","arrow-direction":"down"}})],1),t._v(" "),s("better-pick",{attrs:{"form-data":t.searchForm,columns:t.$SHI_FOU_SELECT,"value-key":"isDelClose",title:"剔除结转凭证"}},[s("van-cell",{attrs:{value:t.$SHI_FOU_LIST[t.searchForm.isDelClose].label,title:"剔除结转凭证","is-link":"","arrow-direction":"down"}})],1),t._v(" "),s("better-pick",{attrs:{"form-data":t.searchForm,columns:t.$SHI_FOU_SELECT,"value-key":"isUsedSub",title:"剔除未启用科目"}},[s("van-cell",{attrs:{value:t.$SHI_FOU_LIST[t.searchForm.isUsedSub].label,title:"剔除未启用科目","is-link":"","arrow-direction":"down"}})],1)],1),t._v(" "),s("div",{staticClass:"b-b-w"},[s("van-button",{staticClass:"b-b-i",attrs:{type:"default",size:"small"},on:{click:t.setOldSearchFrom}},[t._v("重置")]),t._v(" "),s("van-button",{staticClass:"b-b-i",attrs:{loading:t.filterLoading,type:"primary",size:"small"},on:{click:t.filterOK}},[t._v("确定")])],1)])]),t._v(" "),s("year-month-range-select",{ref:"yearMonthRangeSelect",attrs:{"same-year":!0,format:"YYYY-MM-DD"},on:{ok:t.dateRangeSelectOk}}),t._v(" "),s("income-details",{ref:"incomeDetails"}),t._v(" "),s("expend-details",{ref:"expendDetails"})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-shaixuan"})])}],!1,_,"data-v-bd2ff112",null);e.default=b.exports},psh8:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},a={name:"ExpendDetails",components:{},data:function(){return{show:!1,sumInfo:{},spendingBVOList:[]}},computed:{},created:function(){},deactivated:function(){this.show=!1},methods:{open:function(t,e){this.sumInfo=e;var s=[];t.forEach(function(t){t.bvos&&t.bvos.length&&t.bvos.forEach(function(e){s.push(i({},e,{sumSubCode:t.subCode,sumSubName:t.subName,sumSubAbstract:t.subAbstract,sumSubMny:t.subMny}))})}),this.spendingBVOList=s,this.show=!0},close:function(){this.show=!1,this.$emit("close")},toPath:function(t){this.$router.push(t)}}},o=s("W5g0");var n=function(t){s("S5/N")},r=Object(o.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-popup",{style:{height:"100%",width:"100%"},attrs:{position:"left"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("van-nav-bar",{attrs:{title:"支出明细","left-arrow":""},on:{"click-left":t.close}}),t._v(" "),s("div",{staticClass:"common-view-wrap",staticStyle:{"overflow-x":"scroll"}},[s("van-row",{staticClass:"common-info-block",staticStyle:{"background-color":"#F7F8F9"},attrs:{type:"flex",justify:"space-between"}},[s("div",{staticClass:"ellipsis-text"},[t._v("本期总支出")]),t._v(" "),s("div",[t._v("¥ "+t._s(t.$formatMoney(t.sumInfo.spendingTotalPeriod)))])]),t._v(" "),s("div",{staticClass:"common-block"},[s("table",{attrs:{cellspacing:"0",cellpadding:"0",border:"1"}},[s("thead",[s("tr",[s("th",{attrs:{width:"25%"}},[t._v("总账科目")]),t._v(" "),s("th",{attrs:{width:"25%"}},[t._v("明细科目")]),t._v(" "),s("th",{attrs:{width:"25%"}},[t._v("摘要说明")]),t._v(" "),s("th",{attrs:{width:"25%"}},[t._v("金额")])])]),t._v(" "),t._l(t.spendingBVOList,function(e,i){return s("tr",{key:i},[s("td",{staticStyle:{"text-align":"left","font-size":".32rem"}},[t._v(t._s(e.subCode)+" - "+t._s(e.subName))]),t._v(" "),s("td",{staticStyle:{"text-align":"left","font-size":".32rem"}},[t._v(t._s(e.subCode)+" - "+t._s(e.subName))]),t._v(" "),s("td",{staticStyle:{"text-align":"left","font-size":".32rem"}},[t._v(t._s(e.subAbstract))]),t._v(" "),s("td",{staticStyle:{"text-align":"right","font-size":".32rem"}},[t._v(t._s(t.$formatMoney(e.subMny)))])])})],2)])],1)],1)},[],!1,n,"data-v-5ee66760",null);e.default=r.exports}});